# handle base options
PRG ?=gwion
CC ?=gcc
YACC ?=yacc
LEX ?=flex
PREFIX ?=/usr/local
SOUNDPIPE_LIB ?=-lsoundpipe
SOUNDPIPE_INC ?=
LDFLAGS += -lm -ldl -rdynamic -lpthread
CFLAGS += -Iinclude -std=c99 -O3 -mfpmath=sse -mtune=native -fstrict-aliasing -D_GNU_SOURCE
#CFLAGS += -Iinclude -std=c99 -m32 -fstrict-aliasing -D_GNU_SOURCE
# compiler warnings
CFLAGS += -Wall -Wextra 
#-pedantic
CFLAGS += -fPIC

CFLAGS += -O2
#CFLAGS += -O2
#CFLAGS += -Os
#CFLAGS += -Ofast

CFLAGS  += -fno-signed-zeros -ffinite-math-only -fno-trapping-math -fno-sanitize=all
CFLAGS  += -ffast-math -msse3 -mssse3 -msse4 -mavx
CFLAGS += -fomit-frame-pointer
CFLAGS += -fdelete-null-pointer-checks
CFLAGS += -fdata-sections
CFLAGS += -ffunction-sections
CFLAGS += -Wl,--gc-sections
CFLAGS += -fno-plt

# handle boolean options
USE_DOUBLE    = 0
USE_COVERAGE ?= 0
USE_GWCOV    ?= 0
USE_MEMCHECK ?= 1
USE_GWREPL   ?= 0
USE_GWUDP    ?= 0
USE_OPTIMIZE ?= 0
USE_OBSTACK  ?= 0
USE_COLOR    ?= 0
USE_JIT      ?= 1
USE_LTO      ?= 0
USE_VMBENCH  ?= 1

# handle definitions
D_FUNC       ?= dummy_driver

# base plugin directories
GWPLUG_DIR   ?= $(shell echo ~/.gwplug)

# handle libraries
DUMMY_D      ?= 1
SILENT_D     ?= 0
SPA_D        ?= 0
SNDFILE_D    ?= 1
ALSA_D       ?= 0
JACK_D       ?= 0
PORTAUDIO_D  ?= 0
SOUNDIO_D    ?= 0
PULSE_D      ?= 0
PLOT_D       ?= 0
SLES_D       ?= 0

DEBUG_STACK  ?= 0
#COLOR        ?= 1
#CFLAGS+= -DCOLOR
